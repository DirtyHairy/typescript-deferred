!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.typescriptDeferred=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){return new i(f)}function e(a){return a instanceof j?a:d().resolve(a).promise}function f(a){setTimeout(function(){return a()},0)}c.create=d,c.when=e;var g;!function(a){a[a.Pending=0]="Pending",a[a.ResolutionInProgress=1]="ResolutionInProgress",a[a.Resolved=2]="Resolved",a[a.Rejected=3]="Rejected"}(g||(g={}));var h=function(){function a(a,b,c){this._dispatcher=a,this._successCB=b,this._errorCB=c,this.result=new i(a)}return a.prototype.resolve=function(a){var b=this;return"function"!=typeof this._successCB?void this.result.resolve(a):void this._dispatcher(function(){return b._dispatchCallback(b._successCB,a)})},a.prototype.reject=function(a){var b=this;return"function"!=typeof this._errorCB?void this.result.reject(a):void this._dispatcher(function(){return b._dispatchCallback(b._errorCB,a)})},a.prototype._dispatchCallback=function(a,b){var c;try{c=a(b),this.result.resolve(c)}catch(d){return void this.result.reject(d)}},a}(),i=function(){function a(a){this._dispatcher=a,this._stack=[],this._state=0,this.promise=new j(this)}return a.prototype._then=function(a,b){if("function"!=typeof a&&"function"!=typeof b)return this.promise;var c=new h(this._dispatcher,a,b);switch(this._state){case 0:case 1:this._stack.push(c);break;case 2:c.resolve(this._value);break;case 3:c.reject(this._error)}return c.result.promise},a.prototype.resolve=function(a){var b=this;if(0!==this._state)return this;var c,d=typeof a,e=!0;try{if(null===a||"object"!==d&&"function"!==d||"function"!=typeof(c=a.then)){this._state=2,this._value=a;var f,g=this._stack.length;for(f=0;g>f;f++)this._stack[f].resolve(a);this._stack.splice(0,g)}else{if(a===this||a===this.promise)throw new TypeError("recursive resolution");this._state=1,c.call(a,function(a){e&&(e=!1,b._state=0,b.resolve(a))},function(a){e&&(e=!1,b._state=1,b.reject(a))})}}catch(h){e&&this.reject(h)}return this},a.prototype.reject=function(a){this._state=3,this._error=a;var b=this._stack.length,c=0;for(c=0;b>c;c++)this._stack[c].reject(a);return this._stack.splice(0,b),this},a}(),j=function(){function a(a){this._deferred=a}return a.prototype.then=function(a,b){return this._deferred._then(a,b)},a.prototype.otherwise=function(a){return this._deferred._then(void 0,a)},a.prototype.always=function(a){return this._deferred._then(a,a)},a}()},{}]},{},[1])(1)});